import { IdentityTransform } from "./identity_transform.js";
function createStreamChannel() {
  const transform = new IdentityTransform();
  const writer = transform.writable.getWriter();
  let isClosed = false;
  return {
    write: (chunk) => writer.write(chunk),
    stream: () => transform.readable,
    close: async () => {
      try {
        const result = await writer.close();
        isClosed = true;
        return result;
      } catch (e) {
        if (e instanceof Error && e.name === "TypeError") {
          isClosed = true;
          return;
        }
        throw e;
      }
    },
    get closed() {
      return isClosed;
    }
  };
}
export {
  createStreamChannel
};
//# sourceMappingURL=stream_channel.js.map